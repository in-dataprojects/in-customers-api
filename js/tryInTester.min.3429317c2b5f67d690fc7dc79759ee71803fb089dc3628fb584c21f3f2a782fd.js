const TESTER_PAID_ID="ndhpdjlmagefginpimmegdninnnkodgo",TESTER_FREE_ID="aejoelaoggembcahagimdiliamlcdmfm",TESTER_FREE_INSTALL_URL="https://chrome.google.com/webstore/detail/aejoelaoggembcahagimdiliamlcdmfm",MINIMUM_VERSION_API_TESTER_REQUIRED="25.7.0",isNullOrUndefined=e=>e==null,apiContextMeta=document.querySelector("[name=try-in-tester-api-context]");let API_CONTEXT;isNullOrUndefined(apiContextMeta)||(API_CONTEXT=JSON.parse(apiContextMeta.content));const metaItemTryInTesterConfig=document.querySelector("[name=try-in-tester-configuration]");let CONFIG_TRYIN;isNullOrUndefined(metaItemTryInTesterConfig)||(CONFIG_TRYIN=JSON.parse(metaItemTryInTesterConfig.getAttribute("content")));const dropdownItemsEndpoints=Array.from(document.querySelectorAll(".js-try-in-tester-endpoint"));dropdownItemsEndpoints.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=[...e.parentElement.children].indexOf(e),s=e.getAttribute("data-endpoint-url");updateSelectedEndpointInDropdowns(n,s)})});const updateSelectedEndpointInDropdowns=(e,t)=>{dropdownItemsEndpoints.forEach(n=>{n.classList.remove("dropdown__item--selected");const s=[...n.parentElement.children].indexOf(n);s===e&&n.classList.add("dropdown__item--selected");const o=n.closest(".js-try-in-tester").querySelector(".js-try-in-tester--action");o.setAttribute("data-endpoint-url",t)})},firstButtonEndpointUrl=document.querySelector(".js-try-in-tester-endpoint");if(!isNullOrUndefined(firstButtonEndpointUrl)){const e=firstButtonEndpointUrl.getAttribute("data-endpoint-url");updateSelectedEndpointInDropdowns(0,e)}let activeTryInTesterButton;const tryInTesterApiButtons=Array.from(document.querySelectorAll(".js-api-try-in-tester"));tryInTesterApiButtons.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),activeTryInTesterButton=e;const n=e.getAttribute("data-endpoint-url");tryApiInTester(n)})});const tryInTesterOperationButtons=Array.from(document.querySelectorAll(".js-operation-try-in-tester"));tryInTesterOperationButtons.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),activeTryInTesterButton=e;const n=e.getAttribute("data-operation-id"),s=e.getAttribute("data-endpoint-url");tryOperationInTester(n,s)})}),document.addEventListener("click",e=>{closeUpgradeModal(e.target)});const upgradeTesterModal=document.getElementById("try-in-tester-version-modal"),tryOperationInTester=(e="",t)=>{const n=(n,s,o)=>{const i=buildPayloadForOperation(s,e,t);i&&postTryInTesterMessage(n,o,i)};fetchApiTesterFormat6().then(e=>{if(e){const t=getInstalledTesterOrOpenChromeStoreIfNeeded();if(t){const s=isNullOrUndefined(e?.environments)||e?.environments?.length<1;s?n(t,e,"openRequest"):isRequiredMinimumTesterVersionInstalledOrOpenModal(t)&&n(t,e,"openParameterizedRequest")}}})},fetchApiTesterFormat6=()=>fetch(API_CONTEXT.etnResource6Url).then(e=>e.ok?Promise.resolve(e.json()):Promise.reject("Impossible to fetch the entity tree node.")).then(e=>{const t=e.entities[0];return isNullOrUndefined(t)?Promise.reject("apitesterformat6.json is malformed"):Promise.resolve({entityTreeNode:t,environments:e.environments||[]})}),retrieveEntityFromOperationId=(e,t)=>{let n;return e.some(function e(s){return s.entity.id===t?(n=s,!0):s.children?.some(e)}),n},retrieveEnvironmentFromEndpointUrl=(e,t)=>{const n=(e,t)=>!isNullOrUndefined(Object.values(e).find(e=>typeof e=="object"?n(e,t):e===t));if(isNullOrUndefined(t)||t.length===0)return null;if(isNullOrUndefined(e))return t[0];for(const s of t)if(n(s,e))return s;return t[0]},buildPayloadForOperation=(e,t,n)=>{const s=retrieveEntityFromOperationId(e.entityTreeNode.children,t);if(isNullOrUndefined(s)||isNullOrUndefined(s.entity))return null;const o=e?.environments;if(isNullOrUndefined(o)||o.length<1)return s.entity;const i=retrieveEnvironmentFromEndpointUrl(n,o);return{request:s.entity,environment:i||{}}},getTesterVersion=e=>{const t=getTesterInstall(e);if(t)return t.dhcVersion},getTesterVersionWithoutPatch=e=>{const t=getTesterVersion(e);if(t)return/^([0-9]+\.[0-9]+\.[0-9]+)(\.[0-9]+)?$/.exec(t)[1]},isTesterVersionEqualOrHigherThan=(e="1.0.0",t)=>{const n=t.split(".").map(e=>parseInt(e,10)),s=e.split(".").map(e=>parseInt(e,10));for(let e=0;e<n.length;e++){if(isNullOrUndefined(s[e]))return!1;if(n[e]>s[e])return!1;if(n[e]<s[e])return!0}return!0},openUpgradeModal=e=>{const n=document.getElementById("js-current-version-tester");isNullOrUndefined(n)||(n.innerText=e);const s=document.getElementById("js-minimum-version-tester");isNullOrUndefined(s)||(s.innerText=MINIMUM_VERSION_API_TESTER_REQUIRED),upgradeTesterModal.hidden=!1,upgradeTesterModal.focus();const t=upgradeTesterModal.querySelectorAll("a[href]:not([disabled]), button:not([disabled])"),o=t[0],i=t[t.length-1];upgradeTesterModal.addEventListener("keydown",e=>{const t=e.key;if(t!=="Escape"&&t!=="Tab")return;if(t==="Escape"){closeUpgradeModal();return}const{activeElement:n}=document;e.shiftKey?(n===o||n===upgradeTesterModal)&&(i.focus(),e.preventDefault()):n===i&&(o.focus(),e.preventDefault())})},isRequiredMinimumTesterVersionInstalledOrOpenModal=e=>{const t=getTesterVersionWithoutPatch(e);return!!t&&(!!isTesterVersionEqualOrHigherThan(t,MINIMUM_VERSION_API_TESTER_REQUIRED)||(openUpgradeModal(t),!1))},closeUpgradeModal=e=>{(isNullOrUndefined(e)||e.classList.contains("js-close-modal"))&&(upgradeTesterModal.hidden=!0,activeTryInTesterButton.focus())},tryApiInTester=e=>{const t=(t,n)=>{const s=buildPayloadForApi(n,e);postTryInTesterMessage(t,"openApi",s)};fetchApiTesterFormat6().then(e=>{if(e){const n=getInstalledTesterOrOpenChromeStoreIfNeeded();if(n){const s=isNullOrUndefined(e?.environments)||e?.environments?.length<1;s?t(n,e):isRequiredMinimumTesterVersionInstalledOrOpenModal(n)&&t(n,e)}}})},buildPayloadForApi=(e,t)=>{const n=retrieveEnvironmentFromEndpointUrl(t,e.environments);return{apiMetadata:{},entityTreeNode:e.entityTreeNode,environments:n?[n]:[]}},getInstalledTesterOrOpenChromeStoreIfNeeded=()=>{if(isChromeBrowser()){const e=getTesterIdInstalled();if(e)return e}return window.open(TESTER_FREE_INSTALL_URL,"_blank"),null},isChromeBrowser=()=>{const t=window.chrome,e=window.navigator,n=e.vendor,s=typeof window.opr!="undefined",o=e.userAgent.indexOf("Edge")>-1,i=e.userAgent.match("CriOS");return!!i||t!==null&&typeof t!="undefined"&&n==="Google Inc."&&s===!1&&o===!1},getTesterIdInstalled=()=>CONFIG_TRYIN&&CONFIG_TRYIN.testerextensionid?CONFIG_TRYIN.testerextensionid:isTesterInstalled(TESTER_PAID_ID)?TESTER_PAID_ID:isTesterInstalled(TESTER_FREE_ID)?TESTER_FREE_ID:null,isTesterInstalled=e=>{const t=getTesterInstall(e);return!isNullOrUndefined(t)},getTesterInstall=e=>{const t=Array.prototype.slice.call(document.querySelectorAll("#dhcIndicator")).map(e=>e.innerText).map(e=>JSON.parse(e));return t.find(t=>t.extensionId===e)},postTryInTesterMessage=(e,t,n)=>{const o=!1,i="";function a(){return isNullOrUndefined(CONFIG_TRYIN)?{isdevmode:o,querystringparameter:i,testerextensionid:e}:r(CONFIG_TRYIN)}function r({isdevmode:t=o,querystringparameter:n=i,testerextensionid:s=e}){return{isdevmode:t,querystringparameter:n,testerextensionid:s}}const s=a(),c={isDevMode:s.isdevmode,payload:n,payloadType:n?"apiTester":"none",queryString:s.querystringparameter,source:"API Portal",target:s.testerextensionid,type:t,shouldReplaceOriginTab:!1};window.postMessage(c,window.location.origin)}